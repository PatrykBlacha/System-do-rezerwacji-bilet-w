{% extends "base.html" %}
{% block title %}Zakup Grupowy{% endblock %}

{% block content %}
<h2>Zakup Grupowy - {{ event.name }}</h2>

<form method="post">
    {% csrf_token %}
    {% for ticket in tickets %}
        <div style="margin-bottom: 20px; padding: 10px; border: 1px solid #ccc;">
            <input type="checkbox" name="ticket_ids" value="{{ ticket.id }}" id="check_{{ ticket.id }}">
            <strong>Miejsce:</strong> {{ ticket.seat }}, <strong>Cena:</strong> {{ ticket.price }}<br>

            <input type="text" name="first_name_{{ ticket.id }}" placeholder="ImiÄ™" class="input_{{ ticket.id }}">
            <input type="text" name="last_name_{{ ticket.id }}" placeholder="Nazwisko" class="input_{{ ticket.id }}">
            <input type="email" name="email_{{ ticket.id }}" placeholder="Email" class="input_{{ ticket.id }}">
            <input type="text" name="address_{{ ticket.id }}" placeholder="Adres" class="input_{{ ticket.id }}">
        </div>
    {% endfor %}
    <button type="submit">Kup grupowo</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll("input[type=checkbox][name='ticket_ids']").forEach(function (checkbox) {
        const ticketId = checkbox.value;
        checkbox.addEventListener("change", function () {
            const inputs = document.querySelectorAll(`.input_${ticketId}`);
            inputs.forEach(function (input) {
                input.required = checkbox.checked;
            });
        });
    });
});
</script>
{% endblock %}
